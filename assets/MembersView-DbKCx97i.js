import{r,u,R as n,j as e,a as p,M as l}from"./index-Dh2HMBa2.js";import{C as h}from"./Dashboard-CFLZ1FYc.js";const j={[l.Active]:"bg-green-900/60 text-green-200",[l.Overdue]:"bg-red-900/60 text-red-200",[l.Inactive]:"bg-gray-700 text-gray-200"},M=()=>{const[c,m]=r.useState([]),[i,g]=r.useState([]),[b,o]=r.useState(!0),{user:t}=u();r.useEffect(()=>{(async()=>{o(!0);try{const[a,y]=await Promise.all([p.getMembers(),p.getUsers()]);m(a),g(y)}catch(a){console.error("Failed to fetch data",a)}finally{o(!1)}})()},[]);const f=r.useMemo(()=>new Map(i.map(s=>[s.id,s.name])),[i]),d=r.useMemo(()=>{if(!t)return[];if(t.role===n.Admin)return c;let s=c.filter(a=>a.branch===t.branch);return t.role===n.Seller?s.filter(a=>a.originalSeller===t.id):s},[c,t]);if(b)return e.jsx(h,{children:"Cargando socios..."});const x=(t==null?void 0:t.role)===n.Admin||(t==null?void 0:t.role)===n.Manager;return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-brand-text-primary mb-6",children:"Socios del Gimnasio"}),e.jsxs(h,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-brand-border",children:[e.jsx("thead",{className:"bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Nombre"}),(t==null?void 0:t.role)===n.Admin&&e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Sucursal"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Plan"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Vencimiento"}),x&&e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-300 uppercase tracking-wider",children:"Vendedor Origen"})]})}),e.jsx("tbody",{className:"bg-brand-surface divide-y divide-brand-border",children:d.map(s=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-brand-text-primary",children:s.name})}),(t==null?void 0:t.role)===n.Admin&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text-secondary",children:s.branch}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-brand-text-secondary",children:s.plan})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j[s.status]||"bg-gray-700 text-gray-200"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text-secondary",children:new Date(s.endDate).toLocaleDateString("es-AR")}),x&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text-secondary",children:f.get(s.originalSeller)||"N/A"})]},s.id))})]})}),d.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("h3",{className:"text-xl font-semibold text-brand-text-secondary",children:"No se encontraron socios"}),e.jsx("p",{className:"text-brand-text-muted mt-2",children:"No tienes socios asignados o no hay socios en el sistema."})]})]})]})};export{M as default};
