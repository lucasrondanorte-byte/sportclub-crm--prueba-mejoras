const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ReportsView-EXpbmAyH.js","assets/index-Dh2HMBa2.js","assets/ProspectsView-DkgoaGMp.js","assets/MembersView-DbKCx97i.js","assets/TasksView-DlQQEAvP.js","assets/UsersView-DrbEOXPk.js"])))=>i.map(i=>d[i]);
import{u as p,R as s,j as e,L as M,r as n,a as j,_ as h}from"./index-Dh2HMBa2.js";const _=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),C=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),I=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4z"})}),L=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),S=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),z=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8"})}),V=({currentView:l,setCurrentView:t,sidebarOpen:o,setSidebarOpen:a})=>{const{user:i}=p(),c=[{name:"reports",label:"Reportes",icon:e.jsx(_,{}),roles:[s.Admin,s.Manager,s.Viewer,s.Seller]},{name:"prospects",label:"Prospectos",icon:e.jsx(C,{}),roles:[s.Admin,s.Manager,s.Seller]},{name:"members",label:"Socios",icon:e.jsx(I,{}),roles:[s.Admin,s.Manager,s.Seller]},{name:"tasks",label:"Tareas",icon:e.jsx(L,{}),roles:[s.Admin,s.Manager,s.Seller]},{name:"users",label:"Usuarios",icon:e.jsx(S,{}),roles:[s.Admin,s.Manager]}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-20 bg-black bg-opacity-50 transition-opacity lg:hidden ${o?"block":"hidden"}`,onClick:()=>a(!1)}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 flex flex-col bg-brand-sidebar text-brand-text-secondary shadow-lg border-r border-brand-border transition-transform transform lg:translate-x-0 lg:static lg:inset-0 ${o?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-center p-6 border-b border-brand-border",children:[e.jsx(M,{className:"w-12 h-12"}),e.jsx("span",{className:"ml-3 text-2xl font-bold text-brand-text-primary",children:"SportClub CRM"})]}),e.jsx("nav",{className:"p-4 flex-1",children:c.map(r=>i&&r.roles.includes(i.role)&&e.jsxs("div",{className:"relative mt-2 group",children:[e.jsxs("a",{href:"#",className:`flex items-center w-full px-4 py-3 rounded-lg transition-colors duration-200 ${l===r.name?"bg-brand-primary text-white shadow-md":"hover:bg-gray-700 hover:text-brand-text-primary"}`,onClick:d=>{d.preventDefault(),t(r.name),a(!1)},children:[r.icon,e.jsx("span",{className:"mx-4 font-medium",children:r.label})]}),e.jsxs("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 z-40 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:[r.label,e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -left-1 w-2 h-2 bg-gray-800 rotate-45"})]})]},r.name))}),e.jsx("div",{className:"p-4 border-t border-brand-border",children:e.jsxs("div",{className:"relative group",children:[e.jsxs("a",{href:"https://github.com/lucasrondanorte-byte/SportClub-CRM",target:"_blank",rel:"noopener noreferrer",className:"flex items-center w-full px-4 py-3 text-brand-text-secondary rounded-lg transition-colors duration-200 hover:bg-gray-700 hover:text-brand-text-primary",children:[e.jsx(z,{}),e.jsx("span",{className:"mx-4 font-medium",children:"Ver en GitHub"})]}),e.jsxs("div",{className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 z-40 px-3 py-1.5 bg-gray-800 text-white text-xs rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:["Ver el código fuente en GitHub.",e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 -left-1 w-2 h-2 bg-gray-800 rotate-45"})]})]})})]})]})},A=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),E=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),T=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),R=({setSidebarOpen:l})=>{const{user:t,logout:o}=p();return e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 bg-brand-surface border-b border-brand-border shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l(!0),className:"text-brand-text-muted lg:hidden focus:outline-none",children:e.jsx(T,{})}),e.jsx("div",{className:"relative mx-4 lg:mx-0",children:e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3"})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center mr-4 text-brand-text-secondary",children:[e.jsx(A,{}),e.jsxs("div",{className:"ml-2 text-sm text-left",children:[e.jsx("p",{className:"font-semibold text-brand-text-primary",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-brand-text-muted capitalize",children:t==null?void 0:t.role})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center px-3 py-2 text-sm font-medium text-red-300 transition-colors duration-200 bg-brand-primary/20 rounded-md hover:bg-brand-primary/40 focus:outline-none",children:[e.jsx(E,{}),"Salir"]})]})]})},H=({children:l,className:t="",title:o,actions:a})=>e.jsxs("div",{className:`bg-brand-surface rounded-lg border border-brand-border p-6 ${t}`,children:[(o||a)&&e.jsxs("div",{className:"flex items-center justify-between mb-4 border-b border-brand-border pb-3",children:[o&&e.jsx("h3",{className:"text-xl font-semibold text-brand-text-primary",children:o}),a&&e.jsx("div",{children:a})]}),l]}),B=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),P=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),O=({message:l,type:t,onDismiss:o})=>{n.useEffect(()=>{const d=setTimeout(()=>{o()},8e3);return()=>clearTimeout(d)},[o]);const a={success:{bgColor:"bg-green-600",icon:e.jsx(B,{}),title:"Sincronización Automática"},error:{bgColor:"bg-red-600",icon:e.jsx(P,{}),title:"Error de Sincronización"}},{bgColor:i,icon:c,title:r}=a[t];return e.jsx("div",{className:`fixed top-20 right-5 z-50 w-full max-w-sm p-4 rounded-lg shadow-lg text-white ${i}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:c}),e.jsxs("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:[e.jsx("p",{className:"text-sm font-semibold",children:r}),e.jsx("p",{className:"mt-1 text-sm",children:l})]}),e.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:e.jsxs("button",{onClick:o,className:"inline-flex text-white rounded-md p-1 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white",children:[e.jsx("span",{className:"sr-only",children:"Close"}),"×"]})})]})})},v=n.lazy(()=>h(()=>import("./ReportsView-EXpbmAyH.js"),__vite__mapDeps([0,1]))),W=n.lazy(()=>h(()=>import("./ProspectsView-DkgoaGMp.js"),__vite__mapDeps([2,1]))),D=n.lazy(()=>h(()=>import("./MembersView-DbKCx97i.js"),__vite__mapDeps([3,1]))),$=n.lazy(()=>h(()=>import("./TasksView-DlQQEAvP.js"),__vite__mapDeps([4,1]))),U=n.lazy(()=>h(()=>import("./UsersView-DrbEOXPk.js"),__vite__mapDeps([5,1]))),G=()=>e.jsx(H,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-dashed rounded-full animate-spin border-brand-primary"})})}),F=()=>{const[l,t]=n.useState("reports"),[o,a]=n.useState(!1),[i,c]=n.useState(null),{user:r}=p(),[d,f]=n.useState([]);n.useEffect(()=>{r&&(r.role===s.Admin||r.role===s.Manager)&&j.getUsers().then(u=>{f(u.filter(x=>x.role===s.Seller||x.role===s.Manager||x.role===s.Admin))})},[r]),n.useEffect(()=>{if(!r||r.role!==s.Admin&&r.role!==s.Manager||d.length===0)return;const u=720*60*1e3,x=1800*1e3,b="lastAutoImportTimestamp",g=async()=>{const k=parseInt(localStorage.getItem(b)||"0",10),w=Date.now();if(w-k<u)return;localStorage.setItem(b,w.toString());const m=await j.runGoogleSheetImport(r,d);m.success&&m.importedCount>0?c({message:`${m.importedCount} nuevo(s) prospecto(s) importado(s).`,type:"success"}):m.success||c({message:`Fallo en la sincronización automática: ${m.message}`,type:"error"})};g();const y=setInterval(g,x);return()=>clearInterval(y)},[r,d]);const N=()=>{switch(l){case"reports":return e.jsx(v,{setCurrentView:t});case"prospects":return e.jsx(W,{});case"members":return e.jsx(D,{});case"tasks":return e.jsx($,{});case"users":return e.jsx(U,{});default:return e.jsx(v,{setCurrentView:t})}};return e.jsxs("div",{className:"flex h-screen bg-brand-bg",children:[e.jsx(V,{currentView:l,setCurrentView:t,sidebarOpen:o,setSidebarOpen:a}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx(R,{sidebarOpen:o,setSidebarOpen:a}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-brand-bg",children:e.jsx("div",{className:"container px-6 py-8 mx-auto",children:e.jsx(n.Suspense,{fallback:e.jsx(G,{}),children:N()})})})]}),i&&e.jsx(O,{message:i.message,type:i.type,onDismiss:()=>c(null)})]})},Y=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{H as C,Y as D};
