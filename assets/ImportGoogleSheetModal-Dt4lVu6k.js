import{u as h,r as d,j as e,a as g}from"./index-Dh2HMBa2.js";const j=()=>e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-primary"}),y=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.22 3.006-1.742 3.006H4.42c-1.522 0-2.492-1.672-1.742-3.006l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-4a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z",clipRule:"evenodd"})}),N=({isOpen:i,onClose:x,onSuccess:m,sellers:l})=>{const{user:c}=h(),[r,t]=d.useState("idle"),[a,s]=d.useState(""),p=d.useCallback(()=>{t("idle"),s("")},[]),n=()=>{p(),x()},b=async()=>{if(!c||l.length===0){t("error"),s("No hay vendedores disponibles para asignar los prospectos.");return}t("loading"),s("Importando, por favor espere...");const o=await g.runGoogleSheetImport(c,l);o.success?(t("success"),s(o.message)):(t("error"),s(o.message))},u=()=>{switch(r){case"loading":return e.jsxs("div",{className:"text-center py-10",children:[e.jsx(j,{}),e.jsx("h3",{className:"text-xl font-bold mt-4 text-brand-text-primary",children:"Procesando..."}),e.jsx("p",{className:"text-brand-text-secondary mt-2",children:a})]});case"success":return e.jsxs("div",{className:"text-center py-10",children:[e.jsx(y,{}),e.jsx("h3",{className:"text-2xl font-bold mt-4 text-brand-text-primary",children:"¡Importación Completada!"}),e.jsx("p",{className:"text-brand-text-secondary mt-2",children:a})]});case"error":return e.jsxs("div",{className:"text-center py-10",children:[e.jsx(f,{}),e.jsx("h3",{className:"text-2xl font-bold mt-4 text-brand-text-primary",children:"Error de Importación"}),e.jsx("p",{className:"text-brand-text-secondary mt-2 bg-red-900/30 p-3 rounded-md",children:a})]});case"idle":default:return e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-brand-text-primary",children:"Importar prospectos desde Google Sheet"}),e.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Esta acción buscará nuevos prospectos en la planilla, evitará duplicados y los asignará automáticamente."}),e.jsxs("div",{className:"p-4 text-xs text-brand-text-muted bg-brand-bg/50 border border-brand-border rounded-lg",children:[e.jsx("strong",{children:"Nota:"})," Este proceso puede ser automático. Esta opción es para forzar una sincronización manual ahora."]})]})}};return i?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60","aria-modal":"true",role:"dialog",children:e.jsxs("div",{className:"bg-brand-surface border border-brand-border rounded-lg shadow-xl w-full max-w-lg m-4",children:[e.jsxs("div",{className:"p-5 border-b border-brand-border flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-text-primary",children:"Importación desde Google Sheet"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-3xl font-bold",children:"×"})]}),e.jsx("div",{children:u()}),e.jsxs("div",{className:"px-6 py-4 bg-black/20 border-t border-brand-border flex justify-end gap-3",children:[r==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-brand-text-primary bg-brand-border border border-transparent rounded-md shadow-sm hover:bg-gray-600",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary border border-transparent rounded-md shadow-sm hover:bg-brand-primary-hover",children:"Iniciar Importación"})]}),(r==="success"||r==="error")&&e.jsx("button",{type:"button",onClick:()=>{r==="success"&&m(),n()},className:"px-4 py-2 text-sm font-medium text-white bg-brand-primary border border-transparent rounded-md shadow-sm hover:bg-brand-primary-hover",children:"Cerrar"})]})]})}):null};export{N as default};
